@use "sass:list";
@use "sass:map";
@use "sass:math";
@use "sass:meta";
@use "sass:string";

$md3-light-scheme: (
    primary: #6750a4,
    on-primary: #ffffff,
    primary-container: #eaddff,
    on-primary-container: #21005d,
    secondary: #625b71,
    on-secondary: #ffffff,
    secondary-container: #e8def8,
    on-secondary-container: #1d192b,
    tertiary: #7d5260,
    on-tertiary: #ffffff,
    tertiary-container: #ffd8e4,
    on-tertiary-container: #31111d,
    error: #b3261e,
    on-error: #ffffff,
    error-container: #f9dedc,
    on-error-container: #410e0b,
    surface: #fffbfe,
    on-surface: #1c1b1f,
    surface-tint: #6750a4,
    surface-variant: #e7e0ec,
    on-surface-variant: #49454f,
    outline: #79747e,
    outline-variant: #cac4d0,
    background: #fffbfe,
    on-background: #1c1b1f,
    inverse-surface: #313033,
    inverse-on-surface: #f4eff4,
    inverse-primary: #d0bcff,
    shadow: #000000,
    scrim: #000000,
    surface-dim: #ded8e1,
    surface-bright: #fef7ff,
    surface-container-lowest: #ffffff,
    surface-container-low: #f7f2fa,
    surface-container: #f3edf7,
    surface-container-high: #ede6f0,
    surface-container-highest: #e6e0e9,
    primary-fixed: #eaddff,
    primary-fixed-dim: #d0bcff,
    on-primary-fixed: #21005d,
    on-primary-fixed-variant: #4f378b,
    secondary-fixed: #e8def8,
    secondary-fixed-dim: #ccc2dc,
    on-secondary-fixed: #1d192b,
    on-secondary-fixed-variant: #4a4458,
    tertiary-fixed: #ffd8e4,
    tertiary-fixed-dim: #efb8c8,
    on-tertiary-fixed: #31111d,
    on-tertiary-fixed-variant: #633b48,
    neutral: #e6e1e5,
    neutral-variant: #e7e0ec,
);

$md3-dark-scheme: (
    primary: #d0bcff,
    on-primary: #381e72,
    primary-container: #4f378b,
    on-primary-container: #eaddff,
    secondary: #ccc2dc,
    on-secondary: #332d41,
    secondary-container: #4a4458,
    on-secondary-container: #e8def8,
    tertiary: #efb8c8,
    on-tertiary: #492532,
    tertiary-container: #633b48,
    on-tertiary-container: #ffd8e4,
    error: #f2b8b5,
    on-error: #601410,
    error-container: #8c1d18,
    on-error-container: #f9dedc,
    surface: #1c1b1f,
    on-surface: #e6e1e5,
    surface-tint: #d0bcff,
    surface-variant: #49454f,
    on-surface-variant: #cac4d0,
    outline: #938f99,
    outline-variant: #49454f,
    background: #1c1b1f,
    on-background: #e6e1e5,
    inverse-surface: #e6e1e5,
    inverse-on-surface: #313033,
    inverse-primary: #6750a4,
    shadow: #000000,
    scrim: #000000,
    surface-dim: #141218,
    surface-bright: #36343b,
    surface-container-lowest: #0f0d13,
    surface-container-low: #1d1b20,
    surface-container: #211f26,
    surface-container-high: #2b2930,
    surface-container-highest: #36343b,
    primary-fixed: #eaddff,
    primary-fixed-dim: #d0bcff,
    on-primary-fixed: #21005d,
    on-primary-fixed-variant: #4f378b,
    secondary-fixed: #e8def8,
    secondary-fixed-dim: #ccc2dc,
    on-secondary-fixed: #1d192b,
    on-secondary-fixed-variant: #4a4458,
    tertiary-fixed: #ffd8e4,
    tertiary-fixed-dim: #efb8c8,
    on-tertiary-fixed: #31111d,
    on-tertiary-fixed-variant: #633b48,
    neutral: #47454a,
    neutral-variant: #49454f,
);

$md3-color-schemes: (
    light: $md3-light-scheme,
    dark: $md3-dark-scheme,
);

$md3-surface-role-map: (
    primary: on-primary,
    primary-container: on-primary-container,
    primary-fixed: on-primary-fixed,
    primary-fixed-dim: on-primary-fixed,
    secondary: on-secondary,
    secondary-container: on-secondary-container,
    secondary-fixed: on-secondary-fixed,
    secondary-fixed-dim: on-secondary-fixed,
    tertiary: on-tertiary,
    tertiary-container: on-tertiary-container,
    tertiary-fixed: on-tertiary-fixed,
    tertiary-fixed-dim: on-tertiary-fixed,
    error: on-error,
    error-container: on-error-container,
    surface: on-surface,
    surface-dim: on-surface,
    surface-bright: on-surface,
    surface-variant: on-surface-variant,
    surface-container-lowest: on-surface,
    surface-container-low: on-surface,
    surface-container: on-surface,
    surface-container-high: on-surface,
    surface-container-highest: on-surface,
    background: on-background,
    inverse-surface: inverse-on-surface,
    outline: on-surface,
    outline-variant: on-surface,
    surface-tint: on-surface,
);

$md3-space-scale: (
    2xs: clamp(0.1875rem, 0.4cqi + 0.05rem, 0.25rem),
    xs: clamp(0.25rem, 0.45cqi + 0.06rem, 0.5rem),
    sm: clamp(0.5rem, 0.6cqi + 0.1rem, 0.75rem),
    md: clamp(0.75rem, 0.8cqi + 0.18rem, 1rem),
    lg: clamp(1rem, 1cqi + 0.24rem, 1.5rem),
    xl: clamp(1.5rem, 1.4cqi + 0.32rem, 2rem),
    2xl: clamp(2rem, 2cqi + 0.4rem, 2.75rem),
    3xl: clamp(2.75rem, 2.6cqi + 0.6rem, 3.5rem),
    4xl: clamp(3.5rem, 3cqi + 0.8rem, 4.5rem),
);

$md3-shape-scale: (
    corner-none: 0,
    extra-small: clamp(0.25rem, 0.6cqi, 0.375rem),
    extra-small-top: clamp(0.25rem, 0.6cqi, 0.375rem) clamp(0.25rem, 0.6cqi, 0.375rem) 0 0,
    small: clamp(0.5rem, 0.9cqi, 0.75rem),
    small-top: clamp(0.5rem, 0.9cqi, 0.75rem) clamp(0.5rem, 0.9cqi, 0.75rem) 0 0,
    medium: clamp(0.75rem, 1.2cqi, 1rem),
    large: clamp(1rem, 1.5cqi, 1.5rem),
    large-top: clamp(1rem, 1.5cqi, 1.5rem) clamp(1rem, 1.5cqi, 1.5rem) 0 0,
    large-end: clamp(1rem, 1.5cqi, 1.5rem) clamp(1rem, 1.5cqi, 1.5rem) 0 0,
    extra-large: clamp(1.75rem, 2.4cqi, 2.25rem),
    extra-large-top: clamp(1.75rem, 2.4cqi, 2.25rem) clamp(1.75rem, 2.4cqi, 2.25rem) 0 0,
    extra-large-bottom: 0 0 clamp(1.75rem, 2.4cqi, 2.25rem) clamp(1.75rem, 2.4cqi, 2.25rem),
    full: 9999px,
);

$md3-radius-aliases: (
    xs: extra-small,
    sm: small,
    md: medium,
    lg: large,
    xl: extra-large,
    2xl: extra-large,
    full: full,
);

$md3-type-scale: (
    "display-large": (
        size: clamp(3.375rem, 2.5cqi + 3rem, 4rem),
        line-height: 1.12,
        weight: 400,
        tracking: -0.015em,
    ),
    "display-medium": (
        size: clamp(2.875rem, 1.8cqi + 2.6rem, 3.5rem),
        line-height: 1.16,
        weight: 400,
        tracking: 0,
    ),
    "display-small": (
        size: clamp(2.25rem, 1.2cqi + 2rem, 2.875rem),
        line-height: 1.22,
        weight: 400,
        tracking: 0,
    ),
    "headline-large": (
        size: clamp(2rem, 1cqi + 1.75rem, 2.5rem),
        line-height: 1.24,
        weight: 400,
        tracking: 0,
    ),
    "headline-medium": (
        size: clamp(1.75rem, 0.8cqi + 1.55rem, 2.25rem),
        line-height: 1.28,
        weight: 400,
        tracking: 0,
    ),
    "headline-small": (
        size: clamp(1.5rem, 0.7cqi + 1.35rem, 2rem),
        line-height: 1.33,
        weight: 400,
        tracking: 0,
    ),
    "title-large": (
        size: clamp(1.375rem, 0.6cqi + 1.2rem, 1.75rem),
        line-height: 1.27,
        weight: 400,
        tracking: 0,
    ),
    "title-medium": (
        size: clamp(1rem, 0.5cqi + 0.9rem, 1.25rem),
        line-height: 1.5,
        weight: 500,
        tracking: 0.015em,
    ),
    "title-small": (
        size: clamp(0.875rem, 0.4cqi + 0.8rem, 1rem),
        line-height: 1.43,
        weight: 500,
        tracking: 0.01em,
    ),
    "label-large": (
        size: clamp(0.875rem, 0.3cqi + 0.8rem, 0.95rem),
        line-height: 1.43,
        weight: 500,
        tracking: 0.01em,
    ),
    "label-medium": (
        size: clamp(0.75rem, 0.3cqi + 0.7rem, 0.85rem),
        line-height: 1.33,
        weight: 500,
        tracking: 0.04em,
    ),
    "label-small": (
        size: clamp(0.6875rem, 0.3cqi + 0.65rem, 0.8rem),
        line-height: 1.45,
        weight: 500,
        tracking: 0.05em,
    ),
    "body-large": (
        size: clamp(1rem, 0.4cqi + 0.92rem, 1.125rem),
        line-height: 1.5,
        weight: 400,
        tracking: 0.015em,
    ),
    "body-medium": (
        size: clamp(0.875rem, 0.35cqi + 0.8rem, 1rem),
        line-height: 1.45,
        weight: 400,
        tracking: 0.01em,
    ),
    "body-small": (
        size: clamp(0.75rem, 0.3cqi + 0.7rem, 0.9rem),
        line-height: 1.4,
        weight: 400,
        tracking: 0.01em,
    ),
);

$md3-state-opacity: (
    hover: 0.08,
    focus: 0.12,
    focus-visible: 0.12,
    focus-ring: 0.22,
    press: 0.12,
    drag: 0.16,
    selected: 0.16,
    disabled: 0.38,
    icon: 0.54,
);

$md3-motion-durations: (
    fast: 120ms,
    normal: 160ms,
    slow: 220ms,
    long: 320ms,
    extra-long: 420ms,
);

$md3-motion-easing: (
    standard: cubic-bezier(0.4, 0, 0.2, 1),
    emphasized: cubic-bezier(0.2, 0, 0, 1),
    decelerate: cubic-bezier(0, 0, 0.2, 1),
    accelerate: cubic-bezier(0.4, 0, 1, 1),
    bounce: cubic-bezier(0.34, 1.56, 0.64, 1),
);

$md3-icon-sizes: (
    xs: clamp(0.75rem, 0.35cqi + 0.65rem, 0.9rem),
    sm: clamp(0.95rem, 0.4cqi + 0.85rem, 1.1rem),
    md: clamp(1.25rem, 0.45cqi + 1.1rem, 1.45rem),
    lg: clamp(1.5rem, 0.6cqi + 1.3rem, 1.75rem),
    xl: clamp(2rem, 0.8cqi + 1.65rem, 2.25rem),
);

$md3-avatar-sizes: (
    sm: clamp(2.25rem, 1cqi + 2rem, 2.75rem),
    md: clamp(2.75rem, 1.4cqi + 2.4rem, 3.5rem),
    lg: clamp(3.5rem, 1.6cqi + 3rem, 4.5rem),
);

$md3-elevation-levels: (
    0: (),
    1: (
        0 1px 2px color-mix(in oklab, var(--md3-shadow, #000) 18%, transparent),
        0 1px 3px 1px color-mix(in oklab, var(--md3-shadow, #000) 14%, transparent),
    ),
    2: (
        0 1px 2px color-mix(in oklab, var(--md3-shadow, #000) 20%, transparent),
        0 2px 6px 2px color-mix(in oklab, var(--md3-shadow, #000) 16%, transparent),
    ),
    3: (
        0 2px 3px color-mix(in oklab, var(--md3-shadow, #000) 22%, transparent),
        0 4px 8px 3px color-mix(in oklab, var(--md3-shadow, #000) 18%, transparent),
    ),
    4: (
        0 3px 4px color-mix(in oklab, var(--md3-shadow, #000) 24%, transparent),
        0 6px 12px 4px color-mix(in oklab, var(--md3-shadow, #000) 18%, transparent),
    ),
    5: (
        0 5px 5px color-mix(in oklab, var(--md3-shadow, #000) 26%, transparent),
        0 8px 16px 6px color-mix(in oklab, var(--md3-shadow, #000) 22%, transparent),
    ),
);

@function _md3-fetch($source, $token, $label: "token") {
    @if map.has-key($source, $token) {
        @return map.get($source, $token);
    }

    @error "Unknown #{$label} `#{$token}`. Available: #{map.keys($source)}";
}

@function md3-color-scheme($mode: light) {
    @return _md3-fetch($md3-color-schemes, $mode, "color mode");
}

@function md3-color($role, $mode: light) {
    $scheme: md3-color-scheme($mode);
    @return _md3-fetch($scheme, $role, "color role");
}

@function md3-var($role) {
    @return "--md3-#{$role}";
}

@function md3-has-color($role, $mode: null) {
    @if $mode == null {
        @return md3-has-color($role, light) or md3-has-color($role, dark);
    }

    $scheme: map.get($md3-color-schemes, $mode);
    @return $scheme != null and map.has-key($scheme, $role);
}

@function md3-on($role) {
    @if map.has-key($md3-surface-role-map, $role) {
        @return map.get($md3-surface-role-map, $role);
    }

    $candidate: unquote("on-#{$role}");

    @if md3-has-color($candidate) {
        @return $candidate;
    }

    @if string.index($role, "on-") == 1 {
        @return $role;
    }

    @return "on-surface";
}

@function md3-space($token) {
    @return _md3-fetch($md3-space-scale, $token, "space token");
}

@function md3-gap($token) { @return md3-space($token); }
@function md3-padding($token) { @return md3-space($token); }

@function md3-radius($token) {
    @if map.has-key($md3-shape-scale, $token) {
        @return map.get($md3-shape-scale, $token);
    }

    @if map.has-key($md3-radius-aliases, $token) {
        $alias: map.get($md3-radius-aliases, $token);
        @return map.get($md3-shape-scale, $alias);
    }

    @error "Unknown MD3 radius token `#{$token}`. Available: #{map.keys($md3-shape-scale)}";
}

@function md3-type($token, $prop: null) {
    $definition: _md3-fetch($md3-type-scale, $token, "type token");

    @if $prop == null {
        @return $definition;
    }

    @if not map.has-key($definition, $prop) {
        @error "Unknown typography property `#{$prop}` for token `#{$token}`. Available: #{map.keys($definition)}";
    }

    @return map.get($definition, $prop);
}

@function md3-state($state) {
    @return _md3-fetch($md3-state-opacity, $state, "state token");
}

@function md3-duration($token: normal) {
    @return _md3-fetch($md3-motion-durations, $token, "duration token");
}

@function md3-easing($token: standard) {
    @return _md3-fetch($md3-motion-easing, $token, "easing token");
}

@function md3-icon-size($token: md) {
    @return _md3-fetch($md3-icon-sizes, $token, "icon size");
}

@function md3-avatar-size($token: md) {
    @return _md3-fetch($md3-avatar-sizes, $token, "avatar size");
}

@function _shadow-to-string($layers) {
    $result: "";

    @each $layer in $layers {
        $result: if($result == "", "#{$layer}", "#{$result}, #{$layer}");
    }

    @return if($result == "", none, string.unquote($result));
}

@function md3-elevation($level: 0) {
    @if not map.has-key($md3-elevation-levels, $level) {
        @error "Unknown elevation level `#{$level}`. Available: #{map.keys($md3-elevation-levels)}";
    }

    $layers: map.get($md3-elevation-levels, $level);
    @return _shadow-to-string($layers);
}

@mixin md3-typography($token, $overrides: ()) {
    $configuration: md3-type($token);

    @if $overrides != () {
        $configuration: map.merge($configuration, $overrides);
    }

    font-size: map.get($configuration, size);
    line-height: map.get($configuration, line-height);
    font-weight: map.get($configuration, weight);
    letter-spacing: map.get($configuration, tracking);
    font-optical-sizing: auto;
    font-variation-settings: "wght" map.get($configuration, weight);
}

@mixin md3-surface($role: surface, $on-role: null, $elevation: null, $tint: null) {
    $bg-var: md3-var($role);
    $on-role-computed: if($on-role != null, $on-role, md3-on($role));
    background: var(#{$bg-var});
    background-color: var(#{$bg-var});
    color: var(#{md3-var($on-role-computed)});

    @if $tint != null {
        --surface-tint-color: var(#{md3-var($tint)});
    }

    @if $elevation != null {
        --md3-elevation-level: #{$elevation};
        box-shadow: var(--md3-elevation-#{$elevation}, #{md3-elevation($elevation)});
    }
}

@mixin md3-state-layer($role: primary, $state: hover, $selector: "&::after") {
    $opacity: md3-state($state);
    $role-var: md3-var($role);
    $weight: math.percentage($opacity);

    @if $selector == "&::after" or $selector == "&::before" {
        position: relative;
        overflow: hidden;
    }

    #{$selector} {
        content: "";
        position: absolute;
        inset: 0;
        background: color-mix(in oklch, var(#{$role-var}) #{$weight}, transparent);
        opacity: 0;
        pointer-events: none;
        transition: opacity var(--duration-fast) var(--ease-out);
    }

    @if $state == hover {
        &:hover #{$selector} { opacity: $opacity; }
    }

    @else if $state == focus {
        &:focus #{$selector},
        &:focus-visible #{$selector} { opacity: $opacity; }
    }

    @else if $state == press {
        &:active #{$selector} { opacity: $opacity; }
    }

    @else {
        &:is(:hover, :focus-visible, :active) #{$selector} { opacity: $opacity; }
    }
}

@mixin md3-export-color-vars($mode: light) {
    $scheme: md3-color-scheme($mode);
    color-scheme: if($mode == dark, dark, light);

    @each $role, $value in $scheme {
        #{md3-var($role)}: #{$value};
    }

    --md3-shadow: #{map.get($scheme, shadow)};
    --md3-scrim: #{map.get($scheme, scrim)};

    --color-primary: var(--md3-primary);
    --color-secondary: var(--md3-secondary);
    --color-tertiary: var(--md3-tertiary);
    --color-accent: var(--md3-tertiary);
    --color-surface: var(--md3-surface);
    --color-surface-variant: var(--md3-surface-variant);
    --color-outline: var(--md3-outline);
    --color-outline-variant: var(--md3-outline-variant);
    --color-on-surface: var(--md3-on-surface);
    --color-on-background: var(--md3-on-background);
    --color-background: var(--md3-background);
    --color-inverse-surface: var(--md3-inverse-surface);
    --color-inverse-on-surface: var(--md3-inverse-on-surface);
    --surface-tint-color: var(--md3-surface-tint);
    --color-error: var(--md3-error);
    --color-danger: var(--color-error);
    --color-success: oklch(0.72 0.13 150 / 1);
    --color-warning: oklch(0.82 0.12 80 / 1);
    --color-info: oklch(0.7 0.1 220 / 1);
}

@mixin md3-export-density-vars() {
    @each $token, $value in $md3-space-scale {
        --space-#{$token}: #{$value};
        --gap-#{$token}: #{$value};
        --padding-#{$token}: #{$value};
    }

    @each $token, $value in $md3-shape-scale {
        --radius-#{$token}: #{$value};
    }

    @each $alias, $token in $md3-radius-aliases {
        --radius-#{$alias}: #{md3-radius($token)};
    }

    --radius-full: #{md3-radius(full)};
}

@mixin md3-export-component-vars() {
    --card-padding: var(--padding-lg);
    --card-gap: var(--gap-md);
    --card-radius: #{md3-radius(lg)};
    --card-avatar-size: #{md3-avatar-size(md)};

    --form-radius: #{md3-radius(md)};
    --form-padding: var(--padding-md);
    --form-gap: var(--gap-sm);

    --button-radius: #{md3-radius(full)};
    --button-padding-x: var(--padding-lg);
    --button-padding-y: var(--padding-sm);

    --nav-gap: var(--gap-sm);
    --nav-padding: var(--padding-sm);
    --nav-radius: #{md3-radius(sm)};

    --icon-size-xs: #{md3-icon-size(xs)};
    --icon-size-sm: #{md3-icon-size(sm)};
    --icon-size-md: #{md3-icon-size(md)};
    --icon-size-lg: #{md3-icon-size(lg)};
    --icon-size-xl: #{md3-icon-size(xl)};

    --avatar-size-sm: #{md3-avatar-size(sm)};
    --avatar-size: #{md3-avatar-size(md)};
    --avatar-size-lg: #{md3-avatar-size(lg)};

    --text-opacity-disabled: #{md3-state(disabled)};
}

@mixin md3-export-motion-vars() {
    --duration-fast: #{md3-duration(fast)};
    --duration-normal: #{md3-duration(normal)};
    --duration-slow: #{md3-duration(slow)};
    --duration-long: #{md3-duration(long)};
    --duration-extra-long: #{md3-duration(extra-long)};

    --ease-out: #{md3-easing(standard)};
    --ease-in-out: #{md3-easing(decelerate)};
    --ease-in: #{md3-easing(accelerate)};
    --ease-emphasized: #{md3-easing(emphasized)};
    --ease-bounce: #{md3-easing(bounce)};

    --transition-fast: opacity var(--duration-fast) var(--ease-out);
    --transition-normal: color var(--duration-normal) var(--ease-out), background-color var(--duration-normal) var(--ease-out), border-color var(--duration-normal) var(--ease-out);
    --transition-slow: transform var(--duration-slow) var(--ease-in-out);
    --transition-all: all var(--duration-normal) var(--ease-out);
}

@mixin md3-export-typography-vars() {
    --font-xs: #{md3-type("label-small", size)};
    --font-sm: #{md3-type("body-small", size)};
    --font-base: #{md3-type("body-medium", size)};
    --font-md: #{md3-type("body-large", size)};
    --font-lg: #{md3-type("title-medium", size)};
    --font-xl: #{md3-type("title-large", size)};
    --font-2xl: #{md3-type("headline-small", size)};

    --font-weight-normal: #{md3-type("body-large", weight)};
    --font-weight-medium: #{md3-type("title-medium", weight)};
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;

    --font-family-base: "InterVariable", "Inter", "Open Sans", "Source Sans 3", "Gill Sans Nova", Ubuntu, "DejaVu Sans", Candara, Segoe, "Segoe UI", Optima, "Source Sans Pro", sans-serif;
    --font-family-mono: "Fragment Mono", "Fira Code", "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

@mixin md3-export-elevation-vars() {
    @each $level, $layers in $md3-elevation-levels {
        --md3-elevation-#{$level}: #{_shadow-to-string($layers)};
    }

    --shadow-sm: var(--md3-elevation-1);
    --shadow-md: var(--md3-elevation-2);
    --shadow-lg: var(--md3-elevation-3);
    --shadow-xl: var(--md3-elevation-4);
    --shadow-2xl: var(--md3-elevation-5);
    --shadow-inset: inset 0 1px 0 color-mix(in oklab, var(--md3-shadow, #000) 12%, transparent);
    --shadow-inset-strong: inset 0 2px 6px color-mix(in oklab, var(--md3-shadow, #000) 18%, transparent);
}

@mixin md3-export-state-vars() {
    --surface-opacity-subtle: 0.02;
    --surface-opacity-muted: 0.04;
    --surface-opacity-default: 0.08;
    --surface-opacity-emphasis: 0.12;
    --surface-opacity-strong: 0.16;

    --contrast-opacity-subtle: 0.04;
    --contrast-opacity-muted: 0.08;
    --contrast-opacity-default: 0.12;
    --contrast-opacity-emphasis: 0.16;
    --contrast-opacity-strong: 0.24;

    --text-tint-primary: 0;
    --text-tint-secondary: 0.04;
    --text-tint-muted: 0.08;
    --text-tint-disabled: #{md3-state(disabled)};

    --border-opacity-subtle: 0.14;
    --border-opacity-default: 0.2;
    --border-opacity-emphasis: 0.24;
    --border-opacity-strong: 0.4;
    --border-opacity-dashed: 0.18;

    --outline-opacity: 0.4;
    --outline-tint: 0;
    --state-opacity-hover: #{md3-state(hover)};
    --state-opacity-focus: #{md3-state(focus)};
    --state-opacity-press: #{md3-state(press)};
    --state-opacity-drag: #{md3-state(drag)};
    --state-opacity-selected: #{md3-state(selected)};
    --state-opacity-disabled: #{md3-state(disabled)};
    --state-opacity-icon: #{md3-state(icon)};

    --scrollbar-opacity: 0.4;
    --scrollbar-tint: 0.1;

    --hover-lift: 0.08;
    --active-lift: 0.12;
    --focus-lift: 0.1;
    --selection-opacity: 0.16;
}

@property --md3-state-layer-opacity {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
}

@property --md3-elevation-level {
    syntax: "<integer>";
    inherits: true;
    initial-value: 0;
}

@layer md3.tokens {
    :where(:root, :host) {
        @include md3-export-density-vars();
        @include md3-export-component-vars();
        @include md3-export-motion-vars();
        @include md3-export-typography-vars();
        @include md3-export-elevation-vars();
        @include md3-export-state-vars();
    }

    //
    :where([data-theme="light"], [data-scheme="light"], .theme-light) {
        @include md3-export-color-vars(light);
    }

    //
    :where([data-theme="dark"], [data-scheme="dark"], .theme-dark) {
        @include md3-export-color-vars(dark);
    }

    //
    :where(:root, :host):not([data-theme]):not([data-scheme]),
    :where(:root, :host):where([data-theme="auto"], [data-scheme="auto"]),
    :where(:root, :host):where([data-theme="system"], [data-scheme="system"])
    {
        @media (prefers-color-scheme: light) {
            @include md3-export-color-vars(light);
        }
        @media (prefers-color-scheme: dark) {
            @include md3-export-color-vars(dark);
        }
    }
}

// Legacy variable aliases (SCSS level)
$color-primary: md3-color(primary);
$color-secondary: md3-color(secondary);
$color-accent: md3-color(tertiary);
$color-success: oklch(0.72 0.13 150 / 1);
$color-warning: oklch(0.82 0.12 80 / 1);
$color-danger: oklch(0.62 0.17 23 / 1);
$color-info: oklch(0.7 0.1 220 / 1);

$text-primary: md3-color(on-surface);
$text-secondary: color-mix(in oklch, md3-color(on-surface) 75%, md3-color(on-surface-variant) 25%);
$text-muted: color-mix(in oklch, md3-color(on-surface-variant) 70%, md3-color(surface) 30%);
$text-light: #ffffff;

$bg-primary: md3-color(background);
$bg-secondary: md3-color(surface-container-low);
$bg-tertiary: md3-color(surface-container);
$bg-overlay: color-mix(in oklch, md3-color(surface) 88%, transparent);

$border-light: color-mix(in oklch, md3-color(on-surface-variant) 14%, transparent);
$border-medium: color-mix(in oklch, md3-color(on-surface-variant) 24%, transparent);
$border-strong: md3-color(outline);

$spacing-xs: md3-space(xs);
$spacing-sm: md3-space(sm);
$spacing-md: md3-space(md);
$spacing-lg: md3-space(lg);
$spacing-xl: md3-space(xl);
$spacing-2xl: md3-space(2xl);
$spacing-3xl: md3-space(3xl);

$border-radius-sm: md3-radius(sm);
$border-radius-md: md3-radius(md);
$border-radius-lg: md3-radius(lg);
$border-radius-xl: md3-radius(xl);
$border-radius-2xl: md3-radius(xl);
$border-radius-full: md3-radius(full);

$shadow-sm: md3-elevation(1);
$shadow-md: md3-elevation(2);
$shadow-lg: md3-elevation(3);
$shadow-xl: md3-elevation(4);
$shadow-2xl: md3-elevation(5);
$shadow-glow-primary: 0 0 0 1px color-mix(in oklch, md3-color(primary) 24%, transparent);
$shadow-glow-secondary: 0 0 0 1px color-mix(in oklch, md3-color(secondary) 24%, transparent);
$shadow-glow-accent: 0 0 0 1px color-mix(in oklch, md3-color(tertiary) 28%, transparent);

$transition-fast: md3-duration(fast);
$transition-base: md3-duration(normal);
$transition-slow: md3-duration(slow);
$transition-bounce: md3-easing(bounce);

$font-family-base: "InterVariable", "Inter", "Open Sans", "Source Sans 3", "Gill Sans Nova", Ubuntu, "DejaVu Sans", Candara, Segoe, "Segoe UI", Optima, "Source Sans Pro", sans-serif;
$font-size-base: md3-type("body-large", size);
$font-size-sm: md3-type("body-medium", size);
$font-size-xs: md3-type("label-small", size);
$font-size-lg: md3-type("title-medium", size);
$font-size-xl: md3-type("headline-small", size);
$font-size-2xl: md3-type("headline-medium", size);
$font-size-3xl: md3-type("display-small", size);
$font-size-4xl: md3-type("display-medium", size);

$font-weight-normal: md3-type("body-large", weight);
$font-weight-medium: md3-type("title-medium", weight);
$font-weight-semibold: 600;
$font-weight-bold: 700;
$font-weight-extrabold: 800;

$z-dropdown: 1000;
$z-sticky: 1020;
$z-fixed: 1030;
$z-modal-backdrop: 1040;
$z-modal: 1050;
$z-popover: 1060;
$z-tooltip: 1070;

$breakpoint-sm: 40rem;
$breakpoint-md: 60rem;
$breakpoint-lg: 75rem;
$breakpoint-xl: 90rem;
$breakpoint-2xl: 105rem;

$container-max-width: min(100%, 110rem);

$backdrop-blur-sm: blur(6px);
$backdrop-blur-md: blur(12px);
$backdrop-blur-lg: blur(18px);

$ui-radius-sm: md3-radius(sm) !default;
$ui-radius-md: md3-radius(md) !default;
$ui-radius-lg: md3-radius(lg) !default;
$ui-border-width: 1px !default;
$ui-duration-fast: md3-duration(fast) !default;
$ui-duration-standard: md3-duration(normal) !default;
$ui-ease-standard: md3-easing(standard) !default;
$ui-spacing-2xs: md3-space(2xs) !default;
$ui-spacing-xs: md3-space(xs) !default;
$ui-spacing-sm: md3-space(sm) !default;
$ui-spacing-md: md3-space(md) !default;
$ui-titlebar-height: 32px !default;
$ui-font-title-size: md3-type("title-small", size) !default;
$ui-font-subtitle-size: md3-type("label-large", size) !default;
$ui-shadow-soft: md3-elevation(2) !default;
$ui-shadow-elevated: md3-elevation(3) !default;

$mobileWidth: 9in;
$isTouch: "screen and (hover: none) and (pointer: coarse)";
$isNotWide: "(width < #{$mobileWidth})";
$isDesktop: "(((hover: hover) or (pointer: fine)) and ((width >= #{$mobileWidth}) or (orientation: landscape)))";
$isMobile: "not #{$isDesktop}";
$isWindowed: "@container u2-windowed #{$isNotWide}";
