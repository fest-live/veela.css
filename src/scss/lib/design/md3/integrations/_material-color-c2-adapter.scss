@mixin material-color-backward-adapter($selector: ":where(:root, :host)") {
    @layer md3.c2-adapter {
        #{$selector} {
            --primary: var(--md-sys-color-primary, var(--primary-fallback, #469));
            --secondary: var(--md-sys-color-secondary, var(--secondary-fallback, var(--primary)));
            --tertiary: var(--md-sys-color-tertiary, var(--tertiary-fallback, var(--secondary)));
            --trinary: var(--tertiary);
            --accent: var(--md-sys-color-tertiary, var(--accent-fallback, var(--tertiary)));
            --current: var(--primary);

            --color-primary: var(--primary);
            --color-secondary: var(--secondary);
            --color-tertiary: var(--tertiary);

            --color-surface: var(--md-sys-color-surface, var(--surface-fallback));
            --color-surface-variant: var(--md-sys-color-surface-variant, var(--surface-variant-fallback, var(--surface-fallback)));
            --color-background: var(--md-sys-color-background, var(--surface-fallback));
            --color-on-surface: var(--md-sys-color-on-surface, var(--on-surface-fallback));
            --color-on-background: var(--md-sys-color-on-background, var(--on-surface-fallback));

            --color-outline: var(--md-sys-color-outline, var(--outline-fallback));
            --color-outline-variant: var(--md-sys-color-outline-variant, var(--outline-variant-fallback, var(--outline-fallback)));

            --inverse-surface: var(--md-sys-color-inverse-surface, var(--inverse-surface-fallback, var(--surface-fallback)));
            --inverse-on-surface: var(--md-sys-color-inverse-on-surface, var(--inverse-on-surface-fallback, var(--on-surface-fallback)));
            --inverse-primary: var(--md-sys-color-inverse-primary, var(--inverse-primary-fallback, var(--primary)));
        }
    }
}

//
@mixin material-color-c2-adapter-remap($selector: ":where(:root, :host)") {
    @layer md3.c2-adapter {
        #{$selector} {
            --md-c2-primary: var(--primary, var(--primary-fallback, #469));
            --md-c2-secondary: var(--secondary, var(--secondary-fallback, var(--md-c2-primary)));
            --md-c2-tertiary: var(--tertiary, var(--tertiary-fallback, var(--md-c2-secondary)));
            --md-c2-error: var(--color-error, var(--color-danger, oklch(0.62 0.17 23 / 1)));
            --md-c2-neutral: var(--surface-fallback, --c2-surface(0.2, var(--md-c2-primary)));

            --md-c2-surface-shift: clamp(0, calc(var(--background-tone-shift, 0.0) + 0.16), 1);
            --md-c2-on-surface-shift: clamp(0, calc(var(--color-tone-shift, 0.0) + 0.06), 1);
            --md-c2-surface-variant-shift: clamp(0, calc(var(--background-tone-shift, 0.0) + 0.34), 1);
            --md-c2-outline-shift: clamp(0, calc(var(--color-tone-shift, 0.0) + 0.28), 1);
            --md-c2-contrast-shift: clamp(0, calc(0.88 - var(--background-tone-shift, 0.0) * 0.3), 1);
            --md-c2-inverse-primary-shift: clamp(0, calc(0.7 - var(--background-tone-shift, 0.0) * 0.2), 1);

            --md-sys-color-primary: var(--md-c2-primary);
            --md-sys-color-on-primary: --c2-on-contrast(0.02, var(--md-c2-primary));
            --md-sys-color-primary-container: --c2-surface(0.74, var(--md-c2-primary));
            --md-sys-color-on-primary-container: --c2-on-surface(0.26, var(--md-c2-primary));

            --md-sys-color-secondary: var(--md-c2-secondary);
            --md-sys-color-on-secondary: --c2-on-contrast(0.02, var(--md-c2-secondary));
            --md-sys-color-secondary-container: --c2-surface(0.68, var(--md-c2-secondary));
            --md-sys-color-on-secondary-container: --c2-on-surface(0.24, var(--md-c2-secondary));

            --md-sys-color-tertiary: var(--md-c2-tertiary);
            --md-sys-color-on-tertiary: --c2-on-contrast(0.02, var(--md-c2-tertiary));
            --md-sys-color-tertiary-container: --c2-surface(0.64, var(--md-c2-tertiary));
            --md-sys-color-on-tertiary-container: --c2-on-surface(0.22, var(--md-c2-tertiary));

            --md-sys-color-error: var(--md-c2-error);
            --md-sys-color-on-error: --c2-on-contrast(0.02, var(--md-c2-error));
            --md-sys-color-error-container: --c2-surface(0.72, var(--md-c2-error));
            --md-sys-color-on-error-container: --c2-on-surface(0.24, var(--md-c2-error));

            --md-sys-color-surface: --c2-surface(var(--md-c2-surface-shift), var(--md-c2-neutral));
            --md-sys-color-on-surface: --c2-on-surface(var(--md-c2-on-surface-shift), var(--md-c2-neutral));
            --md-sys-color-surface-variant: --c2-surface(var(--md-c2-surface-variant-shift), var(--md-c2-neutral));
            --md-sys-color-on-surface-variant: --c2-on-surface(clamp(0, calc(var(--md-c2-on-surface-shift) + 0.14), 1), var(--md-c2-neutral));

            --md-sys-color-outline: color-mix(in oklch, --c2-on-surface(var(--md-c2-outline-shift), var(--md-c2-neutral)) 58%, transparent);
            --md-sys-color-outline-variant: color-mix(
                in oklch,
                --c2-on-surface(clamp(0, calc(var(--md-c2-outline-shift) + 0.1), 1), var(--md-c2-neutral)) 34%,
                --c2-surface(var(--md-c2-surface-variant-shift), var(--md-c2-neutral)) 66%
            );

            --md-sys-color-background: --c2-surface(var(--background-tone-shift, 0.0), var(--md-c2-neutral));
            --md-sys-color-on-background: --c2-on-surface(var(--color-tone-shift, 0.0), var(--md-c2-neutral));

            --md-sys-color-inverse-surface: --c2-contrast(var(--md-c2-contrast-shift), var(--md-c2-neutral));
            --md-sys-color-inverse-on-surface: --c2-on-contrast(clamp(0, calc(var(--md-c2-on-surface-shift) + 0.06), 1), var(--md-c2-neutral));
            --md-sys-color-inverse-primary: --c2-contrast(var(--md-c2-inverse-primary-shift), var(--md-c2-primary));

            --md-sys-color-surface-tint: var(--md-c2-primary);
            --md-sys-color-shadow: color-mix(in oklch, var(--md-c2-neutral) 24%, transparent);
            --md-sys-color-scrim: color-mix(in oklch, var(--md-c2-neutral) 70%, transparent);
        }
    }
}
