// =============================================================================
// CONTAINER-SCOPED VARIABLE INITIALIZATION
// - Preserves existing mixins and APIs
// - Reworks variable system to be more consistent and adaptive
// - Initializes custom properties primarily within @container
// =============================================================================

// Establish a default inline-size container so container queries work broadly
:root, body {
    container-type: inline-size;
}

// Base scaling knobs
:root {
    --size-scale: 1;
    --font-scale: 1;
}

// Adaptive scales via container queries
// Small containers (phones, narrow panes)
@container (inline-size < 30rem) {
    :root {
        --size-scale: 0.92;
        --font-scale: 0.96;
    }
}

// Medium containers (tablets, typical panes)
@container (30rem <= inline-size < 60rem) {
    :root {
        --size-scale: 1;
        --font-scale: 1;
    }
}

// Large containers (desktops, wide panes)
@container (inline-size >= 60rem) {
    :root {
        --size-scale: 1.06;
        --font-scale: 1.04;
    }
}

// Flexible unit helpers
// Consumers can override --u to switch design unit (e.g., to cqi/cqb)
:root {
    --u: 1rem;             // design unit
    --pxu: 1px;            // pixel unit
    --cqi: 1cqi;           // inline container unit
    --cqb: 1cqb;           // block container unit
}

// Redefine key tokens with scale-aware values
// These override values from core/_variables.scss to apply container-driven scaling
:root {
    // Spacing
    --space-xs: calc(0.25rem * var(--size-scale));
    --space-sm: calc(0.5rem * var(--size-scale));
    --space-md: calc(0.75rem * var(--size-scale));
    --space-lg: calc(1rem * var(--size-scale));
    --space-xl: calc(1.25rem * var(--size-scale));
    --space-2xl: calc(1.6rem * var(--size-scale));

    // Gaps
    --gap-xs: calc(0.35rem * var(--size-scale));
    --gap-sm: calc(0.5rem * var(--size-scale));
    --gap-md: calc(0.8rem * var(--size-scale));
    --gap-lg: calc(1rem * var(--size-scale));
    --gap-xl: calc(1.4rem * var(--size-scale));

    // Radius
    --radius-xs: clamp(0.25rem, 0.5cqi, calc(0.375rem * var(--size-scale)));
    --radius-sm: clamp(0.5rem, 0.8cqi, calc(0.65rem * var(--size-scale)));
    --radius-md: clamp(0.75rem, 1cqi, calc(1rem * var(--size-scale)));
    --radius-lg: clamp(0.85rem, 1.2cqi, calc(1.2rem * var(--size-scale)));
    --radius-xl: clamp(1rem, 1.5cqi, calc(1.4rem * var(--size-scale)));
    --radius-full: 9999px;

    // Padding
    --padding-xs: calc(0.35rem * var(--size-scale));
    --padding-sm: calc(0.5rem * var(--size-scale));
    --padding-md: calc(0.75rem * var(--size-scale));
    --padding-lg: calc(1rem * var(--size-scale));
    --padding-xl: calc(1.25rem * var(--size-scale));

    // Font sizes
    --text-xs: clamp(calc(0.7rem * var(--font-scale)), 0.3cqi + 0.6rem, calc(0.75rem * var(--font-scale)));
    --text-sm: clamp(calc(0.75rem * var(--font-scale)), 0.4cqi + 0.65rem, calc(0.85rem * var(--font-scale)));
    --text-base: clamp(calc(0.8rem * var(--font-scale)), 0.5cqi + 0.7rem, calc(0.95rem * var(--font-scale)));
    --text-lg: clamp(calc(0.9rem * var(--font-scale)), 0.6cqi + 0.8rem, calc(1.1rem * var(--font-scale)));
    --text-xl: clamp(calc(1rem * var(--font-scale)), 0.8cqi + 0.9rem, calc(1.3rem * var(--font-scale)));

    // Component tokens
    --card-padding: var(--padding-lg);
    --card-radius: var(--radius-md);
    --card-gap: var(--gap-sm);
    --avatar-size: clamp(32px, 6cqi, 48px);
    --avatar-size-lg: clamp(40px, 8cqi, 64px);
    --icon-size-sm: clamp(0.9rem, 1.2cqi, 1.1rem);
    --icon-size-md: clamp(1.1rem, 1.4cqi, 1.3rem);
    --icon-size-lg: clamp(1.4rem, 1.8cqi, 1.7rem);
}


