@use "veela-lib" as *;

// =============================================================================
// MIXINS & MAPS
// =============================================================================

// Generic helper to emit utility classes from a map of name -> declaration block
@mixin emit-utilities($class-prefix, $map, $prop: null) {
    @each $name, $value in $map {
        .#{$class-prefix}#{$name} {
            @if $prop == null {
                @content;
            } @else {
                #{$prop}: $value;
            }
        }
    }
}

// Helper to emit classes with arbitrary rule bodies
@mixin emit-rules($rules) {
    @each $selector, $body in $rules {
        #{$selector} {
            @each $prop, $val in $body {
                #{$prop}: #{$val};
            }
        }
    }
}

// Common maps
$display-map: (
    none: none,
    block: block,
    inline: inline,
    inline-block: inline-block,
    flex: flex,
    inline-flex: inline-flex,
    grid: grid,
    inline-grid: inline-grid,
);

$flex-direction-map: (
    row: row,
    column: column,
    row-reverse: row-reverse,
    column-reverse: column-reverse,
);

$flex-wrap-map: (
    wrap: wrap,
    nowrap: nowrap,
    wrap-reverse: wrap-reverse,
);

$justify-map: (
    start: flex-start,
    end: flex-end,
    center: center,
    between: space-between,
    around: space-around,
    evenly: space-evenly,
);

$align-map: (
    start: flex-start,
    end: flex-end,
    center: center,
    baseline: baseline,
    stretch: stretch,
);

$grid-cols: 1, 2, 3, 4, 5, 6, 12;
$col-spans: 1, 2, 3, 4, 5, 6, 12;

$gap-map: (
    0: 0,
    1: $spacing-xs,
    2: $spacing-sm,
    3: $spacing-md,
    4: $spacing-lg,
    5: $spacing-xl,
    6: $spacing-2xl,
);

$text-align-map: (
    left: left,
    center: center,
    right: right,
    justify: justify,
);

$font-size-map: (
    xs: $font-size-sm,
    sm: $font-size-base,
    base: $font-size-lg,
    lg: $font-size-xl,
    xl: $font-size-2xl,
    2xl: $font-size-3xl,
    3xl: $font-size-4xl,
);

$font-weight-map: (
    normal: $font-weight-normal,
    medium: $font-weight-medium,
    semibold: $font-weight-semibold,
    bold: $font-weight-bold,
    extrabold: $font-weight-extrabold,
);

$text-transform-map: (
    uppercase: uppercase,
    lowercase: lowercase,
    capitalize: capitalize,
);

$font-style-map: (
    italic: italic,
    not-italic: normal,
);

$text-decoration-map: (
    underline: underline,
    no-underline: none,
);

$leading-map: (
    tight: 1.25,
    normal: 1.5,
    relaxed: 1.625,
    loose: 2,
);

$bg-color-map: (
    primary: $color-primary,
    secondary: $color-secondary,
    success: $color-success,
    warning: $color-warning,
    danger: $color-danger,
    info: $color-info,
    light: $bg-secondary,
    dark: $text-primary,
    white: $bg-primary,
    transparent: transparent,
);

$text-color-map: (
    primary: $color-primary,
    secondary: $color-secondary,
    success: $color-success,
    warning: $color-warning,
    danger: $color-danger,
    info: $color-info,
    light: $text-light,
    dark: $text-primary,
    muted: $text-muted,
);

$border-color-map: (
    primary: $color-primary,
    secondary: $color-secondary,
    success: $color-success,
    warning: $color-warning,
    danger: $color-danger,
    info: $color-info,
);

$radius-map: (
    none: 0,
    sm: $border-radius-sm,
    null: $border-radius-md,
    lg: $border-radius-lg,
    xl: $border-radius-xl,
    2xl: $border-radius-2xl,
    full: $border-radius-full,
);

$shadow-map: (
    none: none,
    sm: $shadow-sm,
    null: $shadow-md,
    lg: $shadow-lg,
    xl: $shadow-xl,
    2xl: $shadow-2xl,
);

$position-map: (
    static: static,
    relative: relative,
    absolute: absolute,
    fixed: fixed,
    sticky: sticky,
);

$inset-zero-map: (
    top-0: (top: 0),
    right-0: (right: 0),
    bottom-0: (bottom: 0),
    left-0: (left: 0),
);

$z-map: (
    0: 0,
    10: 10,
    20: 20,
    30: 30,
    40: 40,
    50: 50,
);

$overflow-map: (
    auto: auto,
    hidden: hidden,
    visible: visible,
    scroll: scroll,
);

$overflow-axis-map: (
    x: x,
    y: y,
);

$size-width-map: (
    auto: auto,
    full: 100%,
    screen: 100vw,
    min: min-content,
    max: max-content,
);

$size-height-map: (
    auto: auto,
    full: 100%,
    screen: 100vh,
    min: min-content,
    max: max-content,
);

$min-size-map: (
    w-0: (min-width: 0),
    w-full: (min-width: 100%),
    h-0: (min-height: 0),
    h-full: (min-height: 100%),
    h-screen: (min-height: 100vh),
);

$max-width-map: (
    none: none,
    xs: 20rem,
    sm: 24rem,
    md: 28rem,
    lg: 32rem,
    xl: 36rem,
    2xl: 42rem,
    full: 100%,
);

$max-height-map: (
    none: none,
    full: 100%,
    screen: 100vh,
);

// =============================================================================
// SPACING UTILITIES
// =============================================================================

// Margin utilities
@each $size,
    $value
        in (
            xs: $spacing-xs,
            sm: $spacing-sm,
            md: $spacing-md,
            lg: $spacing-lg,
            xl: $spacing-xl,
            2xl: $spacing-2xl,
            3xl: $spacing-3xl
        )
{
    .m-#{$size} {
        margin: $value;
    }
    .mt-#{$size} {
        margin-top: $value;
    }
    .mr-#{$size} {
        margin-right: $value;
    }
    .mb-#{$size} {
        margin-bottom: $value;
    }
    .ml-#{$size} {
        margin-left: $value;
    }
    .mx-#{$size} {
        margin-left: $value;
        margin-right: $value;
    }
    .my-#{$size} {
        margin-top: $value;
        margin-bottom: $value;
    }
}

// Padding utilities
@each $size,
    $value
        in (
            xs: $spacing-xs,
            sm: $spacing-sm,
            md: $spacing-md,
            lg: $spacing-lg,
            xl: $spacing-xl,
            2xl: $spacing-2xl,
            3xl: $spacing-3xl
        )
{
    .p-#{$size} {
        padding: $value;
    }
    .pt-#{$size} {
        padding-top: $value;
    }
    .pr-#{$size} {
        padding-right: $value;
    }
    .pb-#{$size} {
        padding-bottom: $value;
    }
    .pl-#{$size} {
        padding-left: $value;
    }
    .px-#{$size} {
        padding-left: $value;
        padding-right: $value;
    }
    .py-#{$size} {
        padding-top: $value;
        padding-bottom: $value;
    }
}

// =============================================================================
// DISPLAY UTILITIES
// =============================================================================

@each $k, $v in $display-map {
    .d-#{$k} { display: $v; }
}

// =============================================================================
// FLEXBOX UTILITIES
// =============================================================================

@each $name, $val in $flex-direction-map {
    .flex-#{$name} { flex-direction: $val; }
}

@each $name, $val in $flex-wrap-map {
    .flex-#{$name} { flex-wrap: $val; }
}

@each $name, $val in $justify-map {
    .justify-#{$name} { justify-content: $val; }
}

@each $name, $val in $align-map {
    .align-#{$name} { align-items: $val; }
}

.flex-1 { flex: 1; }
.flex-auto { flex: auto; }
.flex-none { flex: none; }

// =============================================================================
// GRID UTILITIES
// =============================================================================

@each $n in $grid-cols {
    .grid-cols-#{$n} { grid-template-columns: repeat(#{$n}, 1fr); }
}

@each $n in $col-spans {
    .col-span-#{$n} { grid-column: span #{$n}; }
}

@each $k, $v in $gap-map {
    .gap-#{$k} { gap: $v; }
}

// =============================================================================
// TEXT UTILITIES
// =============================================================================

@each $k, $v in $text-align-map {
    .text-#{$k} { text-align: $v; }
}

@each $k, $v in $font-size-map {
    .text-#{$k} { font-size: $v; }
}

@each $k, $v in $font-weight-map {
    .font-#{$k} { font-weight: $v; }
}

// legacy semantic text colors
.text-primary { color: $text-primary; }
.text-secondary { color: $text-secondary; }
.text-muted { color: $text-muted; }
.text-light { color: $text-light; }

@each $k, $v in $text-transform-map {
    .#{$k} { text-transform: $v; }
}

@each $k, $v in $font-style-map {
    .#{$k} { font-style: $v; }
}

@each $k, $v in $text-decoration-map {
    .#{$k} { text-decoration: $v; }
}

@each $k, $v in $leading-map {
    .leading-#{$k} { line-height: $v; }
}

// =============================================================================
// COLOR UTILITIES
// =============================================================================

@each $k, $v in $bg-color-map {
    .bg-#{$k} { background-color: $v; }
}

@each $k, $v in $text-color-map {
    .text-#{$k} { color: $v; }
}

// =============================================================================
// BORDER UTILITIES
// =============================================================================

.border { border: 1px solid $border-light; }
.border-0 { border: 0; }
.border-t { border-top: 1px solid $border-light; }
.border-r { border-right: 1px solid $border-light; }
.border-b { border-bottom: 1px solid $border-light; }
.border-l { border-left: 1px solid $border-light; }

@each $k, $v in $border-color-map {
    .border-#{$k} { border-color: $v; }
}

@each $k, $v in $radius-map {
    @if $k == null {
        .rounded { border-radius: $v; }
    } @else {
        .rounded-#{$k} { border-radius: $v; }
    }
}

// =============================================================================
// SHADOW UTILITIES
// =============================================================================

@each $k, $v in $shadow-map {
    @if $k == null {
        .shadow { box-shadow: $v; }
    } @else {
        .shadow-#{$k} { box-shadow: $v; }
    }
}

// =============================================================================
// POSITION UTILITIES
// =============================================================================

@each $k, $v in $position-map {
    .#{$k} { position: $v; }
}

@include emit-rules($inset-zero-map);

@each $k, $v in $z-map { .z-#{$k} { z-index: $v; } }

// =============================================================================
// OVERFLOW UTILITIES
// =============================================================================

@each $k, $v in $overflow-map {
    .overflow-#{$k} { overflow: $v; }
}

@each $axis, $axis-val in $overflow-axis-map {
    @each $k, $v in $overflow-map {
        .overflow-#{$axis}-#{$k} { overflow-#{$axis-val}: $v; }
    }
}

// =============================================================================
// WIDTH & HEIGHT UTILITIES
// =============================================================================

@each $k, $v in $size-width-map { .w-#{$k} { width: $v; } }
@each $k, $v in $size-height-map { .h-#{$k} { height: $v; } }

@include emit-rules($min-size-map);

@each $k, $v in $max-width-map { .max-w-#{$k} { max-width: $v; } }

@each $k, $v in $max-height-map { .max-h-#{$k} { max-height: $v; } }

// =============================================================================
// RESPONSIVE UTILITIES
// =============================================================================

@include media-down(sm) {
    .sm\:hidden {
        display: none;
    }
    .sm\:block {
        display: block;
    }
    .sm\:flex {
        display: flex;
    }
    .sm\:grid {
        display: grid;
    }
    .sm\:text-sm {
        font-size: $font-size-sm;
    }
    .sm\:text-base {
        font-size: $font-size-base;
    }
    .sm\:p-2 {
        padding: $spacing-sm;
    }
    .sm\:p-4 {
        padding: $spacing-md;
    }
}

@include media-down(md) {
    .md\:hidden {
        display: none;
    }
    .md\:block {
        display: block;
    }
    .md\:flex {
        display: flex;
    }
    .md\:grid {
        display: grid;
    }
    .md\:flex-col {
        flex-direction: column;
    }
    .md\:text-center {
        text-align: center;
    }
    .md\:p-2 {
        padding: $spacing-sm;
    }
    .md\:p-4 {
        padding: $spacing-md;
    }
}

@include media-up(lg) {
    .lg\:hidden {
        display: none;
    }
    .lg\:block {
        display: block;
    }
    .lg\:flex {
        display: flex;
    }
    .lg\:grid {
        display: grid;
    }
    .lg\:grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
    }
    .lg\:grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
    }
    .lg\:grid-cols-4 {
        grid-template-columns: repeat(4, 1fr);
    }
}
