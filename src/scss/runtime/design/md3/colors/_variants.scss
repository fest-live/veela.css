@use "veela-lib" as *;
//@use "../../../../lib/design/md3/components/buttons" as buttons;

// Dedicated colorization utility classes
// These classes apply semantic color variants and states to elements
@layer ux-colors {

    // =============================================================================
    // COLOR VARIANT CLASSES
    // =============================================================================

    .color-primary { --current: var(--color-primary); }
    .color-secondary { --current: var(--color-secondary); }
    .color-accent { --current: var(--color-accent); }
    .color-success { --current: var(--color-success); }
    .color-warning { --current: var(--color-warning); }
    .color-danger { --current: var(--color-danger); }
    .color-info { --current: var(--color-info); }

    // =============================================================================
    // SURFACE COLORIZATION CLASSES
    // =============================================================================

    .surface {
        @include solid-colorize("&", ("shade": var(--surface-opacity-default), "tint": 0.0));
    }

    .surface-subtle {
        @include solid-colorize("&", ("shade": var(--surface-opacity-subtle), "tint": 0.0));
    }

    .surface-muted {
        @include solid-colorize("&", ("shade": var(--surface-opacity-muted), "tint": 0.0));
    }

    .surface-emphasis {
        @include solid-colorize("&", ("shade": var(--surface-opacity-emphasis), "tint": 0.0));
    }

    .surface-strong {
        @include solid-colorize("&", ("shade": var(--surface-opacity-strong), "tint": 0.0));
    }

    // =============================================================================
    // INTERACTIVE SURFACE CLASSES
    // =============================================================================

    .surface-interactive {
        @include surface-interactive(var(--surface-opacity-default));

        &:hover { --color-shade: calc(var(--surface-opacity-default) + var(--hover-lift, 0.04)); }
        &:active { --color-shade: calc(var(--surface-opacity-default) + var(--active-lift, 0.06)); }
        &:focus-visible { --color-shade: calc(var(--surface-opacity-default) + var(--focus-lift, 0.05)); }
    }

    .surface-interactive-subtle {
        @include surface-interactive(var(--surface-opacity-subtle));

        &:hover { --color-shade: calc(var(--surface-opacity-subtle) + var(--hover-lift, 0.04)); }
        &:active { --color-shade: calc(var(--surface-opacity-subtle) + var(--active-lift, 0.06)); }
    }

    .surface-interactive-emphasis {
        @include surface-interactive(var(--surface-opacity-emphasis));

        &:hover { --color-shade: calc(var(--surface-opacity-emphasis) + var(--hover-lift, 0.04)); }
        &:active { --color-shade: calc(var(--surface-opacity-emphasis) + var(--active-lift, 0.06)); }
    }

    // =============================================================================
    // OVERLAY COLORIZATION CLASSES
    // =============================================================================

    .overlay {
        @include overlay-colorize("&", ("shade": 0.0, "tint": 0.0, "opacity": var(--surface-opacity-muted), "enable-blur": true));
    }

    .overlay-subtle {
        @include overlay-colorize("&", ("shade": 0.0, "tint": 0.0, "opacity": var(--surface-opacity-subtle), "enable-blur": true));
    }

    .overlay-strong {
        @include overlay-colorize("&", ("shade": 0.0, "tint": 0.0, "opacity": var(--surface-opacity-strong), "enable-blur": true));
    }

    .overlay-solid {
        @include overlay-colorize("&", ("shade": 0.0, "tint": 0.0, "opacity": 0.95, "enable-blur": false));
    }

    // =============================================================================
    // TEXT COLOR CLASSES
    // =============================================================================

    .text-primary {
        @include text-color(var(--text-tint-primary));
    }

    .text-secondary {
        @include text-color(var(--text-tint-secondary));
    }

    .text-muted {
        @include text-color(var(--text-tint-muted));
    }

    .text-disabled {
        @include text-color(var(--text-tint-disabled));
        opacity: 0.6;
        cursor: not-allowed;
    }

    // =============================================================================
    // VALIDATION STATE CLASSES
    // =============================================================================

    .state-success {
        --current: var(--color-success);
        @include validation-success;
    }

    .state-warning {
        --current: var(--color-warning);
        @include validation-warning;
    }

    .state-error {
        --current: var(--color-error, var(--color-danger));
        @include validation-error;
    }

    .state-invalid {
        --current: var(--color-error, var(--color-danger));
        @include validation-error;
    }

    .state-valid {
        --current: var(--color-success);
        @include validation-success;
    }

    // =============================================================================
    // COMBINED COLOR + SURFACE CLASSES
    // =============================================================================

    @each $color-name, $color-var in (
        "primary": var(--color-primary),
        "secondary": var(--color-secondary),
        "accent": var(--color-accent),
        "success": var(--color-success),
        "warning": var(--color-warning),
        "danger": var(--color-danger),
        "info": var(--color-info)
    ) {
        .#{$color-name}-surface {
            --current: #{$color-var};
            @include solid-colorize("&", ("shade": var(--surface-opacity-default), "tint": 0.0));
        }

        .#{$color-name}-surface-interactive {
            --current: #{$color-var};
            @include surface-interactive(var(--surface-opacity-default));

            &:hover { --color-shade: calc(var(--surface-opacity-default) + var(--hover-lift, 0.04)); }
            &:active { --color-shade: calc(var(--surface-opacity-default) + var(--active-lift, 0.06)); }
            &:focus-visible { --color-shade: calc(var(--surface-opacity-default) + var(--focus-lift, 0.05)); }
        }

        .#{$color-name}-overlay {
            --current: #{$color-var};
            @include overlay-colorize("&", ("shade": 0.0, "tint": 0.0, "opacity": var(--surface-opacity-muted), "enable-blur": true));
        }
    }



    // =============================================================================
    // BUTTON MODIFIERS & VARIANTS
    // =============================================================================

    :where(button) {
        @include button-filled();

        // Palette overrides -------------------------------------------------
        &.btn-primary,
        &[data-variant="primary"] {
            --md3-button-bg: var(--md3-primary);
            --md3-button-on: var(--md3-on-primary);
            --md3-button-state-color: var(--md3-primary);
            --md3-button-outline-color: var(--md3-primary);
        }

        &.btn-secondary,
        &[data-variant="secondary"] {
            --md3-button-bg: var(--md3-secondary);
            --md3-button-on: var(--md3-on-secondary);
            --md3-button-state-color: var(--md3-secondary);
            --md3-button-outline-color: var(--md3-secondary);
        }

        &.btn-tertiary,
        &.btn-accent,
        &[data-variant="tertiary"] {
            --md3-button-bg: var(--md3-tertiary);
            --md3-button-on: var(--md3-on-tertiary);
            --md3-button-state-color: var(--md3-tertiary);
            --md3-button-outline-color: var(--md3-tertiary);
        }

        &.btn-surface,
        &[data-variant="surface"] {
            --md3-button-bg: var(--md3-surface);
            --md3-button-on: var(--md3-on-surface);
            --md3-button-state-color: var(--md3-primary);
            --md3-button-outline-color: var(--md3-outline);
        }

        &.btn-success,
        &:is(.save, .submit, .confirm) {
            --md3-button-bg: var(--color-success);
            --md3-button-on: var(--md3-on-surface);
            --md3-button-state-color: var(--color-success);
            --md3-button-outline-color: var(--color-success);
        }

        &.btn-danger,
        &:is(.cancel, .delete, .remove) {
            --md3-button-bg: var(--color-danger);
            --md3-button-on: var(--md3-on-surface);
            --md3-button-state-color: var(--color-danger);
            --md3-button-outline-color: var(--color-danger);
        }

        &.btn-warning,
        &:is(.warning) {
            --md3-button-bg: var(--color-warning);
            --md3-button-on: var(--md3-on-surface);
            --md3-button-state-color: var(--color-warning);
            --md3-button-outline-color: var(--color-warning);
        }

        &.btn-info,
        &:is(.info) {
            --md3-button-bg: var(--color-info);
            --md3-button-on: var(--md3-on-surface);
            --md3-button-state-color: var(--color-info);
            --md3-button-outline-color: var(--color-info);
        }

        // Variant mixins ----------------------------------------------------
        &.btn-filled,
        &.filled {
            @include button-filled(primary, false);
        }

        &.btn-elevated,
        &.elevated {
            @include button-elevated(primary, false);
        }

        &.btn-tonal,
        &.tonal {
            @include button-tonal(secondary-container, secondary, false);
        }

        &.btn-tonal.btn-primary,
        &.btn-tonal-primary {
            --md3-button-bg: var(--md3-primary-container);
            --md3-button-on: var(--md3-on-primary-container);
            --md3-button-state-color: var(--md3-primary);
            @include button-tonal(primary-container, primary, false);
        }

        &.btn-tonal.btn-secondary,
        &.btn-tonal-secondary {
            --md3-button-bg: var(--md3-secondary-container);
            --md3-button-on: var(--md3-on-secondary-container);
            --md3-button-state-color: var(--md3-secondary);
            @include button-tonal(secondary-container, secondary, false);
        }

        &.btn-tonal.btn-tertiary,
        &.btn-tonal-tertiary {
            --md3-button-bg: var(--md3-tertiary-container);
            --md3-button-on: var(--md3-on-tertiary-container);
            --md3-button-state-color: var(--md3-tertiary);
            @include button-tonal(tertiary-container, tertiary, false);
        }

        &.btn-outlined,
        &.outlined {
            --md3-button-on: var(--md3-button-on, var(--md3-primary));
            --md3-button-outline-color: var(--md3-button-outline-color, var(--md3-primary));
            --md3-button-state-color: var(--md3-button-state-color, var(--md3-primary));
            @include button-outlined(primary, false);
        }

        &.btn-outlined.btn-secondary {
            --md3-button-on: var(--md3-secondary);
            --md3-button-outline-color: var(--md3-secondary);
            --md3-button-state-color: var(--md3-secondary);
            @include button-outlined(primary, false);
        }

        &.btn-outlined.btn-tertiary,
        &.btn-outlined.btn-accent {
            --md3-button-on: var(--md3-tertiary);
            --md3-button-outline-color: var(--md3-tertiary);
            --md3-button-state-color: var(--md3-tertiary);
            @include button-outlined(primary, false);
        }

        &.btn-text,
        &.btn-link,
        &.btn-ghost,
        &.text {
            --md3-button-on: var(--md3-button-on, var(--md3-primary));
            --md3-button-state-color: var(--md3-button-state-color, var(--md3-primary));
            @include button-text(primary, false);
        }

        &.btn-text.btn-secondary {
            --md3-button-on: var(--md3-secondary);
            --md3-button-state-color: var(--md3-secondary);
            @include button-text(primary, false);
        }

        &.btn-text.btn-tertiary,
        &.btn-text.btn-accent {
            --md3-button-on: var(--md3-tertiary);
            --md3-button-state-color: var(--md3-tertiary);
            @include button-text(primary, false);
        }

        &.btn-icon,
        &.icon-only {
            @include button-icon();
        }
    }

}
