@use "veela-lib" as md3;

//
@property --size-scale {
    syntax: "<number>";
    inherits: true;
    initial-value: 1;
}

@property --font-scale {
    syntax: "<number>";
    inherits: true;
    initial-value: 1;
}

@property --md3-state-layer-opacity {
    syntax: "<number>";
    inherits: true;
    initial-value: 0;
}

@property --md3-elevation-level {
    syntax: "<integer>";
    inherits: true;
    initial-value: 0;
}

@layer md3.runtime {
    :where(:root, :host) {
        @include md3.md3-export-density-vars();
        @include md3.md3-export-component-vars();
        @include md3.md3-export-motion-vars();
        @include md3.md3-export-typography-vars();
        @include md3.md3-export-elevation-vars();
        @include md3.md3-export-state-vars();
    }

    :where(:root, :host) {
        --size-scale: 1;
        --font-scale: 1;
        --u: 1rem;
        --pxu: 1px;
        --cqi: 1cqi;
        --cqb: 1cqb;

        //
        --sidebar-width: min(clamp(16rem, 10vw, 20rem), 100cqi);
        --container-max-width: min(100%, 110rem);
        --container-padding: clamp(1rem, 3vw, 2rem);

        --breakpoint-sm: 40rem;
        --breakpoint-md: 60rem;
        --breakpoint-lg: 75rem;
        --breakpoint-xl: 90rem;

        --backdrop-blur-subtle: blur(6px) saturate(110%);
        --backdrop-blur-default: blur(12px) saturate(120%);
        --backdrop-blur-strong: blur(18px) saturate(140%);

        --color-success-dark: color-mix(in oklch, var(--color-success) 40%, var(--md3-shadow) 60%);
        --color-warning-dark: color-mix(in oklch, var(--color-warning) 38%, var(--md3-shadow) 62%);
        --color-error-dark: color-mix(in oklch, var(--color-danger) 42%, var(--md3-shadow) 58%);

        //
        @media (max-width: 720px) { --sidebar-width: min(clamp(17.5rem, 35vw, 20rem), 100cqi); }
        @media (max-width: 480px) { --sidebar-width: min(clamp(18.75rem, 40vw, 21.25rem), 100cqi); }
        @media (max-width: 320px) { --sidebar-width: min(clamp(17.5rem, 35vw, 20rem), 100cqi); }
    }
}

:root, body {
    container-type: inline-size;
}

@layer md3.runtime {
    @container (inline-size < 30rem) {
        :root {
            --size-scale: 0.92;
            --font-scale: 0.96;
        }
    }

    @container (30rem <= inline-size < 60rem) {
        :root {
            --size-scale: 1;
            --font-scale: 1;
        }
    }

    @container (inline-size >= 60rem) {
        :root {
            --size-scale: 1.05;
            --font-scale: 1.04;
        }
    }
}
