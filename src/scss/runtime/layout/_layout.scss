@use "../../lib/mixins/layout" as m;
@use "../../lib/mixins/base" as b;
@use "../../lib/misc/ps-anchor" as a;
@use "../../lib/misc/ps-cursor" as c;

//
@property --value  { syntax: "<number>"; initial-value: 0; inherits: true; };
@property --relate { syntax: "<number>"; initial-value: 0; inherits: true; };
@property --drag-x { syntax: "<number>"; initial-value: 0; inherits: false; };
@property --drag-y { syntax: "<number>"; initial-value: 0; inherits: false; };

//
@property --order { syntax: "<integer>"; initial-value: 1; inherits: true; };
@property --content-inline-size { syntax: "<length-percentage>"; initial-value: 100%; inherits: true; };
@property --content-block-size  { syntax: "<length-percentage>"; initial-value: 100%; inherits: true; };
@property --icon-size { syntax: "<length>"; initial-value: 1rem; inherits: true; };
@property --icon-color { syntax: "<color>"; initial-value: currentColor; inherits: true; };

//
@layer ux-classes {
    @include b.host-related(".grid-rows", "::slotted(*)") { @include m.grid-row; }
    @include b.host-related(".grid-rows", "*") { @include m.grid-row; }
    @include b.host-context(".grid-rows") {
        @include m.display(inline-grid, column, center, center);
        @include m.size(auto, auto);

        //
        & {
            grid-auto-rows: minmax(0px, max-content);
            grid-template-columns: minmax(0px, max-content) minmax(0px, 1fr) minmax(0px, max-content);
            margin: 0px;
            padding: 0px;
            list-style-type: none;
            list-style-position: inside;
        }
    }

    //
    @include b.host-related(".grid-columns", "::slotted(*)") { @include m.grid-column; }
    @include b.host-related(".grid-columns", "*") { @include m.grid-column; }
    @include b.host-context(".grid-columns") {
        @include m.display(inline-grid, row, center, center);
        @include m.size(auto, auto);

        //
        & {
            grid-auto-columns: minmax(0px, 1fr);
            grid-template-rows: minmax(0px, 1fr);
            margin: 0px;
            padding: 0px;
            list-style-type: none;
            list-style-position: inside;
        }
    }

    //
    /*
    @include b.host-related(".flex-rows", "::slotted(*)") { @include m.flex-row; }
    @include b.host-related(".flex-rows", "*") { @include m.flex-row; }
    @include b.host-context(".flex-rows") {
        @include m.display(inline-flex, row, center, center);
        @include m.size(max-content, max-content);
    }*/

    //
    @include b.host-related(".flex-columns", "::slotted(*)") { @include m.flex-column; }
    @include b.host-related(".flex-columns", "*") { @include m.flex-column; }
    @include b.host-context(".flex-columns") {
        @include m.display(inline-flex, column, center, center);
        @include m.size(max-content, max-content);
    }

    //
    @include b.host-related(".grid-layered", "::slotted(*)") { @include m.grid-layered; }
    @include b.host-related(".grid-layered", "*") { @include m.grid-layered; }
    @include b.host-context(".grid-layered") {
        @include m.grid-layered;
        @include m.display(inline-grid, column, center, center);
        @include m.size(max-content, max-content);
    }

    //
    @include b.host-related(".grid-rows-3c", "::slotted(*)") { @include m.grid-rows-3c; }
    @include b.host-related(".grid-rows-3c", "*") { @include m.grid-rows-3c; }
    @include b.host-context(".grid-rows-3c") {
        & { grid-template-columns: minmax(0px, max-content) minmax(0px, 1fr) minmax(0px, max-content); }
        @include m.size(auto, auto);
    }

    //
    @include b.host-related(".grid-rows-3c", "::slotted(*:last-child)") { grid-column: var(--order, 1) / 3 span; }
    @include b.host-related(".grid-rows-3c", "*:last-child") { grid-column: var(--order, 1) / 3 span; }
    @include b.host-context(".grid-rows-3c") {
        & { --order: m.sibling-index(); };
        & { grid-column: var(--order, 1) / var(--order, 1) span; }
        @include m.size(auto, auto);
    }

    //
    @include b.host-context(".stretch-inline") { @include m.inline-stretch; }
    @include b.host-context(".stretch-block") { @include m.block-stretch; }

    // requires `box-sizing: border-box`
    @include b.host-context(".content-inline-size") { @include m.content-inline-size; }

    // requires `box-sizing: border-box`
    @include b.host-context(".content-block-size") { @include m.content-block-size; }

    //
    @include b.host-context(".ux-anchor") { @include a.ps-anchor; }
    @include b.host-context(".ux-anchor") { @include c.ps-cursor; }

    //
    @include b.host-context(".layered-wrap") {
        & { background-color: transparent; display: inline grid; inline-size: max-content; block-size: max-content; grid-template-columns: minmax(0px, 1fr); grid-template-rows: minmax(0px, 1fr); z-index: calc(var(--z-index, 0) + 1); overflow: visible; }
        & > * { grid-column: 1 / -1; grid-row: 1 / -1; }
    }
}
